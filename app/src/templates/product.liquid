
{% assign add_to_cart = 'Add to cart' %}
{% assign sold_out = 'Sold Out' %}
{% assign unavailable = 'Unavailable' %}
<article itemscope="itemscope" itemtype="http://schema.org/Product">
  <meta itemprop="url" content="{{ shop.url }}{{ product.url }}"/>
  <meta itemprop="image" content="{{ product | img_url: 'grande' }}"/>
  <form action="/cart/add" method="post" enctype="multipart/form-data">
    <div>{% if product.images.size == 0 %}<img src="{{ '' | img_url: 'grande' }}" alt=""/>{% else %}
      	{% assign featured_image = product.selected_or_first_available_variant.featured_image | default: product.featured_image %}<a href="{{ featured_image | img_url: '1024x1024' }}"><img src="{{ featured_image | img_url: 'grande' }}" alt="{{ product.title | escape }}"/></a>{% if product.images.size > 1 %}
      <ul>{% for image in product.images %}
        <li><a href="{{ image | img_url: '1024x1024' }}"><img src="{{ image | img_url: 'large' }}" alt="{{ image.alt | escape }}"/></a></li>{% endfor %}
      </ul>{% endif %}
      {% endif %}
    </div>
    <div>
      <h1 itemprop="name">{{ product.title }}</h1>{% assign product_vendor_handle = product.vendor | handle %}
      {% if collections[product_vendor_handle].handle == product_vendor_handle %}
      	{% assign vendor_url = collections[product_vendor_handle].url %}
      {% else %}
      	{% assign vendor_url = product.vendor | url_for_vendor %}
      {% endif %}
      <h2 itemprop="brand">{{ product.vendor | link_to: vendor_url }}</h2>
      <div itemprop="description">{{ product.description }}</div>
      <div data-id="{{ product.id }}">{{ product.metafields.spr.reviews }}</div>
      <div itemprop="offers" itemscope="itemscope" itemtype="http://schema.org/Offer">
        <meta itemprop="priceCurrency" content="{{ shop.currency }}"/>{% if product.available %}
        <link itemprop="availability" href="http://schema.org/InStock"/>{% else %}
        <link itemprop="availability" href="http://schema.org/OutOfStock"/>{% endif %}
        <p>
          {% assign variant = product.selected_or_first_available_variant %}
          {% if product.compare_at_price > product.price %}<span itemprop="price">{{ variant.price | money }}</span>
          <s>{{ variant.compare_at_price | money }}</s>{% else %}<span itemprop="price">{{ variant.price | money }}</span>{% endif %}
        </p>
      </div>{% assign hide_default_title = false %}
      {% if product.variants.size == 1 and product.variants.first.title contains 'Default' %}
      	{% assign hide_default_title = true %}
      {% endif %}
      <div class="{% if hide_default_title %} hidden{% endif %}">
        <select id="product-select" name="id">
          {% for variant in product.variants %}
          	<option{% if variant == product.selected_or_first_available_variant %} selected{% endif %} value="{{ variant.id }}">
          	{{ variant.title }} - {{ variant.price | money }}
          	</option>
          {% endfor %}
        </select>
      </div>
      <div>
        <p>{{ '%s is back-ordered. We will ship it separately in 10 to 15 days.' | replace: '%s', '<span id="selected-variant"></span>' }}</p>
      </div>
      <div>
        <input type="submit" name="add" id="add" value="{{ add_to_cart | escape }}" class="primary button"/>
      </div>{% if collection %}
      	{% if collection.previous_product or collection.next_product %}
      <div>
        {% if collection.previous_product %}
        	{% capture prev_url %}{{ collection.previous_product}}#content{% endcapture %}<span>{{ '&larr; Previous Product' | link_to: prev_url }}</span>{% endif %}
        {% if collection.next_product %}
        	{% capture next_url %}{{ collection.next_product}}#content{% endcapture %}<span>{{ 'Next Product &rarr;' | link_to: next_url }}</span></span>{% endif %}
      </div>	{% endif %}
      {% endif %}
    </div>
  </form>
</article>